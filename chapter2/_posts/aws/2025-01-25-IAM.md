# IAM

### IAM이란

- **AWS의 보안 및 관리를 담당하는 글로벌 서비스**
- 주요기능
    - AWS 어카운트 관리 및 리소스/사용자/서비스의 권한 제어
        - 임시 권한 부여
        - 서비스 사용을 위한 인증 정보 부여
    - 사용자 생성, 관리, 계정의 보안
        - Multi-factor Authentication
        - 사용자의 패스워드 정책 관리
    - 다른 계정과의 리소스 공유

### 루트 사용자

- 생성한 계정의 **모든 권한을 자동으로 가지고  있음**
- 생성시 만든 이메일 주소로 로그인
- 탈취당했을 때 **복구가 매우 힘듬** : 사용을 자제하고 `MFA` 설정 필요
- 루트 사용자는 **관리용으로만 이용 권장** : 계정 설정 변경, 빌링 등

### MFA란

- 다중 인증(MFA)은 사용자에게 암호 이외의 추가 정보를 입력하도록 요구하는 **다중 단계 계정 로그인 과정**
- 이점
    - **보안 위험 감소** : 인간의 실수, 암호 및 디바이스 분실로 인한 위험 최소화
    - **디지털 이니셔티브 수행 가능** : 조직은 안심하고 디지털 이니셔티브를 수행할 수 있다. 비지니스는 다중 인증을 사용하여 조직 및 사용자의 **데이터를 보호함**으로써 **온라인 상호 작용과 거래를 안전하게 진행**할 수 있다
    - **보안 대응 향상 :** 기업은 다중 인증 시스템을 구성하여 의심스러운 로그인 시도가 감지될 때마다 적극적으로 알림을 전송할 수 있다

### IAM 사용자

- `IAM`을 통해 생성한 사용자
- 만들 때 주어진 아이디로 로그인
- **기본 권한 없음**: 따로 권한을 부여해야 한다
    - 권한 부여시 루트 사용자와 같이 모든 권한을 가질 수 있지만 빌링 관련  권한은 루트 사용자가 허용해야 한다
- `자격증명` 부여 가능(Optional)
- `콘솔` 로그인 가능(Optional)
- 꼭 사람이 아닌 **어플리케이션 등의 가상의 주체로 대표**할 수도 있다

### 그룹

- IAM 사용자의 집합
- 그룹에 정책을 부여하여 그룹에 속한 모든 사용자에게 해당 정책에 따른 권한 부여 가능

### 역할

- AWS의 권한의 집합
- 역할에 맞는 다양한 권한의 집합을 만들고 IAM 사용자, AWS 서비스, 어플리케이션등이 부여받아 활동

![image.png](/assets/img/chapter2/aws/aws_2_1.png)

### 정책

- 사용자의 그룹, 역할이 무엇을 할 수 있는지에 관한 문서
- `JSON` 형식으로 정의
- `그룹`, `역할`, `유저` 등에 부여되어 각 주체가 행동 가능한 권한을 정의
- 구성
    - `Resource`: 어떤 AWS 리소스에 대해서
    - `Action`: 어떤 행동을
    - `Effect`: 허용/거부
    - `Condition`: 정책이 적용되는 조건

![image.png](/assets/img/chapter2/aws/aws_2_2.png)

## AWS 이용 방법

### AWS 웹 콘솔

- **웹 기반의 콘솔에 로그인**하여 AWS를 사용
- 콘솔 엑세스 `자격 증명`을 사용하여 인증

### 프로그래밍 엑세스 방식

- Command Line Interface(CLI): 명령줄 기반으로 AWS 서비스를 관리하는 통합 도구
- Software Development Kit(SDK): 다양한 프로그래밍 언어로 만들어진 AWS 서비스를 관리하는 패키지
    - 프로그래밍 언어에 맞는 `SDK`를 사용해 개발에 활용
- 프로그램 방식 엑세스 자격 증명을 사용하여 인증
- `Aceess Key`의 구성
    - `Access Key ID`: 유저 이름에 해당하는 키, 일반적으로 공개되어도 무방
    - `Secret Access Key`: 패스워드에 해당하는 키, 공개되면 안됨
- 하나의 IAM 사용자 당 2개의 Access Key Pair 발급 가능
    - 로케이션을 위해서 (한 계정을 비활성화하고 삭제하는데 끊김이 없기 위해서)
- `Secret Access Key`의 경우 발급 시점 이외에 다시 확인이 불가능

